{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Results</h3>
    <a href="{{ url_for('teacher.dashboard') }}" class="btn btn-outline-secondary">Back</a>
  </div>

  <div class="row g-4">
    <div class="col-lg-7">
      <div class="card h-100">
        <div class="card-header">
          <strong>Manual Entry</strong>
        </div>
        <div class="card-body">
          <form method="POST" action="{{ url_for('teacher.enter_results_manual') }}">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Student</label>
                <select class="form-select" name="student_id" required>
                  <option value="">Select student</option>
                  {% for s in students %}
                  <option value="{{ s.id }}">{{ s.name }} ({{ s.registration_number }})</option>
                  {% endfor %}
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">Subject</label>
                <select class="form-select" name="subject_id" required>
                  <option value="">Select subject</option>
                  {% for sub in subjects %}
                  <option value="{{ sub.id }}">{{ sub.name }} ({{ sub.year }} {{ sub.division }})</option>
                  {% endfor %}
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">Exam Type</label>
                <input class="form-control" name="exam_type" placeholder="Unit Test / Midterm / Final" required />
              </div>
              <div class="col-md-3">
                <label class="form-label">Marks Obtained</label>
                <input type="number" step="0.01" class="form-control" name="marks_obtained" required />
              </div>
              <div class="col-md-3">
                <label class="form-label">Max Marks</label>
                <input type="number" step="0.01" class="form-control" name="max_marks" required />
              </div>
              <div class="col-12">
                <label class="form-label">Remarks</label>
                <input class="form-control" name="remarks" placeholder="Optional" />
              </div>
            </div>
            <div class="mt-3">
              <button class="btn btn-primary">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col-lg-5">
      <div class="card h-100">
        <div class="card-header">
          <strong>Upload CSV</strong>
        </div>
        <div class="card-body">
          <p class="text-muted">Columns: student_id, subject (or subject_id), exam_type, marks_obtained, max_marks, remarks</p>
          <form method="POST" action="{{ url_for('teacher.upload_results_csv') }}" enctype="multipart/form-data" class="mt-2">
            <div class="mb-3">
              <input type="file" name="file" accept=".csv" class="form-control" required />
            </div>
            <button class="btn btn-success">Upload</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}








